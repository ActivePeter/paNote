{"note_content_data":{"next_editor_bar_id":1031,"editor_bars":{"1000":{"pos_x":101.0476582845051,"pos_y":-46.38096110026032,"width":98.46153846153847,"height":66.92307692307695,"content":"<p>App</p>","conns":["1000,1001","1002,1000","1000,1004"]},"1001":{"pos_x":168.15384615384613,"pos_y":-223.3260073260074,"width":77.84615384615384,"height":42.84615384615392,"content":"<p>data</p>","conns":["1000,1001","1001,1003"]},"1002":{"pos_x":335.1282051282051,"pos_y":179.89743589743566,"width":73.84615384615384,"height":43.84615384615392,"content":"<p>func</p>","conns":["1002,1000"]},"1003":{"pos_x":284.2978720625781,"pos_y":-341.595130359836,"width":99.2307692307692,"height":49.23076923076916,"content":"<p>context</p>","conns":["1001,1003","1018,1003","1019,1003"]},"1004":{"pos_x":354.51282051282055,"pos_y":-48.5128205128205,"width":83.84615384615385,"height":46.15384615384617,"content":"<p>comp</p>","conns":["1000,1004","1004,1005","1004,1007","1025,1004","1004,1028"]},"1005":{"pos_x":527.7916560563621,"pos_y":-268.07766743060887,"width":164.57142857142864,"height":98.28571428571433,"content":"<p>NoteList</p><p>1.展示笔记列表</p><p>2.获取笔记的存储路径</p>","conns":["1004,1005","1005,1023"]},"1007":{"pos_x":729.6190476190477,"pos_y":411.1895604395603,"width":120.98901098901099,"height":44.72527472527469,"content":"<p>NoteCanvas</p>","conns":["1004,1007","1007,1008","1007,1023"]},"1008":{"pos_x":944.9267399267401,"pos_y":480.19780219780193,"width":58.84615384615384,"height":44.84615384615392,"content":"<p>data</p>","conns":["1007,1008","1008,1009","1008,1010","1008,1011","1008,1012","1013,1008","1008,1014"]},"1009":{"pos_x":1071.2549019607845,"pos_y":310.90196078431313,"width":158.23529411764738,"height":137.6470588235291,"content":"<p>//界面效果相关</p><p>scroll_enabled: false,</p><p>scale: 1,</p><p>scale_step: 0.1,</p><p>edge_size_w: 100,</p><p>edge_size_h: 100,</p>","conns":["1008,1009"]},"1010":{"pos_x":1088.2156862745096,"pos_y":542.2745098039218,"width":170.5882352941179,"height":116.47058823529366,"content":"<p>//note chunk边界计算值</p><p>padding_add_up: 0,</p><p>padding_add_down: 0,</p><p>padding_add_left: 0,</p><p>padding_add_right: 0,</p>","conns":["1008,1010"]},"1011":{"pos_x":1278.4117647058815,"pos_y":293.92156862745037,"width":187.6470588235296,"height":104.86274509803857,"content":"<p>//存储相关</p><p>//data to save-&gt;</p><p>editor_bars: {},</p><p>next_editor_bar_id:1000,</p><p>paths: {},</p>","conns":["1008,1011","1011,1015","1021,1011"]},"1012":{"pos_x":993.9803921568628,"pos_y":702.7058823529412,"width":244.11764705882334,"height":81.7647058823529,"content":"<p>//manage data</p><p>content_manager:new NoteCanvasTs.ContentManager(),</p>","conns":["1008,1012","1012,1016","1012,1024"]},"1013":{"pos_x":1276.5294117647056,"pos_y":604.9019607843138,"width":429.9999999999997,"height":154.66666666666669,"content":"<p>//交互相关</p><p>canvas_mouse_drag_helper: null,</p><p>mouse_recorder: null,</p><p>drag_bar_helper:new NoteCanvasTs.DragBarHelper(),</p><p>moving_obj: null,</p><p>connecting_path: null,</p><p>line_connect_helper:new NoteCanvasFunc.LineConnectHelper(),</p>","conns":["1013,1008"]},"1014":{"pos_x":1281.6666666666667,"pos_y":442.9999999999993,"width":237.33333333333337,"height":134,"content":"<p>//文本块编辑</p><p>editing_editor_bar: null,</p><p>editing_editor_bar_id: \"-1\",</p><p>editor_bar_manager: null,</p><p>editor_tool_helper: new EditorToolFunc.EditorToolHelper(),</p>","conns":["1008,1014"]},"1015":{"pos_x":1494.8039215686272,"pos_y":84.41176470588215,"width":324.11764705882354,"height":317.0588235294124,"content":"<p>editor_bars:{</p><p>id(string):bar（<strong>EditorBar</strong>）</p><p>}</p><p>export class EditorBar{ //in EditorBarFunc.js</p><p class=\"ql-indent-1\">pos_x= 0</p><p class=\"ql-indent-1\">pos_y= 0</p><p class=\"ql-indent-1\">width=150</p><p class=\"ql-indent-1\">height=150</p><p class=\"ql-indent-1\">content=\"\"</p><p class=\"ql-indent-1\">conns= []</p><p class=\"ql-indent-1\">constructor(x,y) {</p><p class=\"ql-indent-1\">this.pos_x=x;</p><p class=\"ql-indent-1\">this.pos_y=y;</p><p class=\"ql-indent-1\">}</p><p>}</p><p>sSs</p>","conns":["1011,1015"]},"1016":{"pos_x":1119.5833333333337,"pos_y":844.5833333333335,"width":339.56060606060674,"height":123.49999999999991,"content":"<p>search_in_canvas=new search.SearchInCanvas()</p><p><br></p><p>功能</p><p class=\"ql-indent-1\">调用开始搜索后，执行搜索，执行时间超过阈值后，timeout后再进行搜索</p>","conns":["1012,1016"]},"1017":{"pos_x":534.3333333333335,"pos_y":565.3333333333342,"width":150,"height":150,"content":"","conns":[]},"1018":{"pos_x":427.6666056315107,"pos_y":-503.73326619466184,"width":140,"height":44,"content":"<p>storage_manager</p>","conns":["1018,1003","1018,1021"]},"1019":{"pos_x":433.6666056315107,"pos_y":-399.7332661946619,"width":140,"height":44,"content":"<p>storage_manager</p>","conns":["1019,1003"]},"1021":{"pos_x":699.0666300455729,"pos_y":-546.7332661946616,"width":192,"height":67,"content":"<p>load_note_all</p><p>从文件或缓存读取笔记数据</p>","conns":["1018,1021","1021,1011","1021,1023"]},"1023":{"pos_x":778.7999877929688,"pos_y":817.3999938964844,"width":306.81818181818255,"height":372.81818181818164,"content":"<h3>NoteContentData</h3><h3>关于note的所有需要存储到的数据</h3><p><br></p><p>//old 3个</p><p class=\"ql-indent-1\">next_editor_bar_id=1000</p><p class=\"ql-indent-1\">editor_bars={}</p><p class=\"ql-indent-1\">paths={}</p><p><br></p><p>//new 1</p><p class=\"ql-indent-1\">PartOfNoteContentData</p><p class=\"ql-indent-2\">//复习的卡片组信息</p><p class=\"ql-indent-2\">review_card_set_man</p><p class=\"ql-indent-2\">//同步到anki的变更的序列化数组</p><p class=\"ql-indent-2\">sync_anki_serialized</p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><h3 class=\"ql-indent-2\">todo</h3><p class=\"ql-indent-2\">大纲结构</p><p class=\"ql-indent-2\">{</p><p class=\"ql-indent-3\">root_ebid</p><p class=\"ql-indent-3\">ebids:[]</p><p class=\"ql-indent-2\">}</p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-1\"><br></p>","conns":["1007,1023","1005,1023","1021,1023"]},"1024":{"pos_x":1119.8181707208805,"pos_y":1024.0001054243608,"width":230.90909090909082,"height":80.90909090909093,"content":"<p>first_load_set</p><p>canvas传入加载完的存储数据</p>","conns":["1012,1024"]},"1025":{"pos_x":550.6666666666667,"pos_y":-69.33333333333354,"width":98,"height":44,"content":"<p>RightPart</p>","conns":["1025,1004","1025,1026","1025,1027"]},"1026":{"pos_x":754.6666666666666,"pos_y":-140.33333333333343,"width":116,"height":48,"content":"<p>ReviewPart</p>","conns":["1025,1026"]},"1027":{"pos_x":826.6666666666669,"pos_y":32.66666666666657,"width":220,"height":190,"content":"<p>NoteOutline</p><p>根据存储的大纲中存在的rootnode和nodes</p><p>递归绘制出大纲图</p><p><br></p><p>笔记内容经过变更就需要判断是否为大纲笔记，若是，则需更新大纲。</p>","conns":["1025,1027"]},"1028":{"pos_x":892.4999999999999,"pos_y":-435.00000000000006,"width":151.76470588235293,"height":43.5294117647059,"content":"<p>RightMenu</p>","conns":["1004,1028","1028,1029","1028,1030"]},"1029":{"pos_x":1100.3846153846152,"pos_y":-476.15384615384625,"width":173.84615384615392,"height":62.30769230769229,"content":"<p>通过bus通信，获取到右键事件并显示</p>","conns":["1028,1029"]},"1030":{"pos_x":1094.230769230769,"pos_y":-365.3846153846154,"width":519.2307692307705,"height":102.30769230769221,"content":"<p>触发方：</p><p><br></p><p><br></p><pre class=\"ql-syntax\" spellcheck=\"false\">RightMenuFuncTs.if_right_click_then_emit_bus(\n  e, ReviewPartCardFunc.construct_right_menu(review_part, this))\n</pre>","conns":["1028,1030"]}},"paths":{"1000,1001":{"ox":101.0476582845051,"oy":-223.3260073260074,"b_bar":"1000","e_bar":"1001","w":67.10618786934103,"h":176.9450462257471,"bx":0,"by":176.9450462257471,"ex":67.10618786934103,"ey":0},"1002,1000":{"ox":101.0476582845051,"oy":-46.38096110026032,"b_bar":"1002","e_bar":"1000","w":234.08054684369998,"h":226.27839699769598,"bx":234.08054684369998,"by":226.27839699769598,"ex":0,"ey":0},"1001,1003":{"ox":168.15384615384613,"oy":-341.595130359836,"b_bar":"1001","e_bar":"1003","w":116.14402590873198,"h":118.26912303382858,"bx":0,"by":118.26912303382858,"ex":116.14402590873198,"ey":0},"1000,1004":{"ox":101.0476582845051,"oy":-48.5128205128205,"b_bar":"1000","e_bar":"1004","w":253.46516222831545,"h":2.131859412560175,"bx":0,"by":2.131859412560175,"ex":253.46516222831545,"ey":0},"1004,1005":{"ox":354.51282051282055,"oy":-268.07766743060887,"b_bar":"1004","e_bar":"1005","w":173.2788355435415,"h":219.56484691778837,"bx":0,"by":219.56484691778837,"ex":173.2788355435415,"ey":0},"1004,1007":{"ox":354.51282051282055,"oy":-48.5128205128205,"b_bar":"1004","e_bar":"1007","w":375.10622710622715,"h":459.70238095238113,"bx":0,"by":0,"ex":375.10622710622715,"ey":459.70238095238113},"1007,1008":{"ox":729.6190476190477,"oy":411.1895604395603,"b_bar":"1007","e_bar":"1008","w":215.30769230769238,"h":69.00824175824164,"bx":0,"by":0,"ex":215.30769230769238,"ey":69.00824175824164},"1008,1009":{"ox":944.9267399267401,"oy":310.90196078431313,"b_bar":"1008","e_bar":"1009","w":126.32816203404445,"h":169.2958414134888,"bx":0,"by":169.2958414134888,"ex":126.32816203404445,"ey":0},"1008,1010":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1008","e_bar":"1010","w":143.28894634776952,"h":62.07670760611984,"bx":0,"by":0,"ex":143.28894634776952,"ey":62.07670760611984},"1008,1011":{"ox":944.9267399267401,"oy":293.92156862745037,"b_bar":"1008","e_bar":"1011","w":333.48502477914144,"h":186.27623357035156,"bx":0,"by":186.27623357035156,"ex":333.48502477914144,"ey":0},"1008,1012":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1008","e_bar":"1012","w":49.05365223012268,"h":222.50808015513928,"bx":0,"by":0,"ex":49.05365223012268,"ey":222.50808015513928},"1013,1008":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1013","e_bar":"1008","w":331.60267183796554,"h":124.70415858651188,"bx":331.60267183796554,"by":124.70415858651188,"ex":0,"ey":0},"1008,1014":{"ox":944.9267399267401,"oy":442.9999999999993,"b_bar":"1008","e_bar":"1014","w":336.73992673992666,"h":37.197802197802616,"bx":0,"by":37.197802197802616,"ex":336.73992673992666,"ey":0},"1011,1015":{"ox":1278.4117647058815,"oy":84.41176470588215,"b_bar":"1011","e_bar":"1015","w":216.39215686274565,"h":209.50980392156822,"bx":0,"by":209.50980392156822,"ex":216.39215686274565,"ey":0},"1012,1016":{"ox":993.9803921568628,"oy":702.7058823529412,"b_bar":"1012","e_bar":"1016","w":125.60294117647095,"h":141.87745098039227,"bx":0,"by":0,"ex":125.60294117647095,"ey":141.87745098039227},"1018,1003":{"ox":284.2978720625781,"oy":-503.73326619466184,"b_bar":"1018","e_bar":"1003","w":143.3687335689326,"h":162.13813583482585,"bx":143.3687335689326,"by":0,"ex":0,"ey":162.13813583482585},"1019,1003":{"ox":284.2978720625781,"oy":-399.7332661946619,"b_bar":"1019","e_bar":"1003","w":149.3687335689326,"h":58.1381358348259,"bx":149.3687335689326,"by":0,"ex":0,"ey":58.1381358348259},"1018,1021":{"ox":427.6666056315107,"oy":-546.7332661946616,"b_bar":"1018","e_bar":"1021","w":271.40002441406216,"h":42.99999999999977,"bx":0,"by":42.99999999999977,"ex":271.40002441406216,"ey":0},"1021,1011":{"ox":699.0666300455729,"oy":-546.7332661946616,"b_bar":"1021","e_bar":"1011","w":579.3451346603086,"h":840.654834822112,"bx":0,"by":0,"ex":579.3451346603086,"ey":840.654834822112},"1007,1023":{"ox":729.6190476190477,"oy":411.1895604395603,"b_bar":"1007","e_bar":"1023","w":49.180940173921044,"h":406.2104334569241,"bx":0,"by":0,"ex":49.180940173921044,"ey":406.2104334569241},"1005,1023":{"ox":527.7916560563621,"oy":-268.07766743060887,"b_bar":"1005","e_bar":"1023","w":251.0083317366067,"h":1085.4776613270913,"bx":0,"by":0,"ex":251.0083317366067,"ey":1085.4776613270913},"1021,1023":{"ox":699.0666300455729,"oy":-546.7332661946616,"b_bar":"1021","e_bar":"1023","w":79.73335774739587,"h":1364.1332600911462,"bx":0,"by":0,"ex":79.73335774739587,"ey":1364.1332600911462},"1012,1024":{"ox":993.9803921568628,"oy":702.7058823529412,"b_bar":"1012","e_bar":"1024","w":125.83777856401775,"h":321.29422307141954,"bx":0,"by":0,"ex":125.83777856401775,"ey":321.29422307141954},"1025,1004":{"ox":354.51282051282055,"oy":-69.33333333333354,"b_bar":"1025","e_bar":"1004","w":196.1538461538462,"h":20.820512820513045,"bx":196.1538461538462,"by":0,"ex":0,"ey":20.820512820513045},"1025,1026":{"ox":550.6666666666667,"oy":-140.33333333333343,"b_bar":"1025","e_bar":"1026","w":203.9999999999999,"h":70.99999999999989,"bx":0,"by":70.99999999999989,"ex":203.9999999999999,"ey":0},"1025,1027":{"ox":550.6666666666667,"oy":-69.33333333333354,"b_bar":"1025","e_bar":"1027","w":276.0000000000001,"h":102.00000000000011,"bx":0,"by":0,"ex":276.0000000000001,"ey":102.00000000000011},"1004,1028":{"ox":354.51282051282055,"oy":-435.00000000000006,"b_bar":"1004","e_bar":"1028","w":537.9871794871793,"h":386.48717948717956,"bx":0,"by":386.48717948717956,"ex":537.9871794871793,"ey":0},"1028,1029":{"ox":892.4999999999999,"oy":-476.15384615384625,"b_bar":"1028","e_bar":"1029","w":207.88461538461536,"h":41.15384615384619,"bx":0,"by":41.15384615384619,"ex":207.88461538461536,"ey":0},"1028,1030":{"ox":892.4999999999999,"oy":-435.00000000000006,"b_bar":"1028","e_bar":"1030","w":201.73076923076917,"h":69.61538461538464,"bx":0,"by":0,"ex":201.73076923076917,"ey":69.61538461538464}},"part":{"review_card_set_man":{"cardsets":{}},"sync_anki_serialized":"[]","note_outline":{"trees":[{"all_ebs":{"1000":1,"1001":1,"1002":1,"1004":1,"1005":1,"1007":1,"1025":1},"root_node":{"child_nodes":[{"child_nodes":[{"child_nodes":[],"cur_ebid":"1007"},{"child_nodes":[],"cur_ebid":"1025"},{"child_nodes":[],"cur_ebid":"1005"}],"cur_ebid":"1004"},{"child_nodes":[],"cur_ebid":"1001"},{"child_nodes":[],"cur_ebid":"1002"}],"cur_ebid":"1000"}}]}}},"note_id":"2022:5:2:9:40:7:314"}