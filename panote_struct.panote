{"note_content_data":{"next_editor_bar_id":2064,"editor_bars":{"1000":{"pos_x":-33.15688717004031,"pos_y":-8.630961100260285,"width":75.68376068376065,"height":45.256410256410234,"content":"<p>App</p>","conns":["1000,1001","1002,1000","1000,1004"]},"1001":{"pos_x":122.08313908313914,"pos_y":-260.86136086136094,"width":78.56043956043955,"height":46.53663003663011,"content":"<p>data</p>","conns":["1000,1001","1033,1001","1031,1001"]},"1002":{"pos_x":335.12820512820514,"pos_y":179.8974358974356,"width":73.84615384615384,"height":43.84615384615392,"content":"<p>func</p>","conns":["1002,1000"]},"1004":{"pos_x":352.51282051282055,"pos_y":-226.51282051282055,"width":83.84615384615385,"height":46.15384615384617,"content":"<p>comp</p>","conns":["1000,1004","1004,1005","1004,1007","1025,1004","1004,1028"]},"1005":{"pos_x":459.45832272302874,"pos_y":313.5889992360577,"width":164.57142857142864,"height":98.28571428571433,"content":"<p>NoteList</p><p>1.展示笔记列表</p><p>2.获取笔记的存储路径</p>","conns":["1004,1005","1005,1023"]},"1007":{"pos_x":729.6190476190477,"pos_y":411.1895604395603,"width":120.98901098901099,"height":44.72527472527469,"content":"<p>NoteCanvas</p>","conns":["1004,1007","1007,1008","1007,1023"]},"1008":{"pos_x":944.9267399267401,"pos_y":480.19780219780193,"width":58.84615384615384,"height":44.84615384615392,"content":"<p>data</p>","conns":["1007,1008","1008,1009","1008,1010","1008,1011","1008,1012","1013,1008","1008,1014"]},"1009":{"pos_x":1071.2549019607845,"pos_y":310.90196078431313,"width":158.23529411764738,"height":137.6470588235291,"content":"<p>//界面效果相关</p><p>scroll_enabled: false,</p><p>scale: 1,</p><p>scale_step: 0.1,</p><p>edge_size_w: 100,</p><p>edge_size_h: 100,</p>","conns":["1008,1009"]},"1010":{"pos_x":1088.2156862745096,"pos_y":542.2745098039218,"width":170.5882352941179,"height":116.47058823529366,"content":"<p>//note chunk边界计算值</p><p>padding_add_up: 0,</p><p>padding_add_down: 0,</p><p>padding_add_left: 0,</p><p>padding_add_right: 0,</p>","conns":["1008,1010"]},"1011":{"pos_x":1278.4117647058815,"pos_y":293.92156862745037,"width":187.6470588235296,"height":104.86274509803857,"content":"<p>//存储相关</p><p>//data to save-&gt;</p><p>editor_bars: {},</p><p>next_editor_bar_id:1000,</p><p>paths: {},</p>","conns":["1008,1011","1011,1015","1021,1011"]},"1012":{"pos_x":993.9803921568628,"pos_y":702.7058823529412,"width":244.11764705882334,"height":81.7647058823529,"content":"<p>//manage data</p><p>content_manager:new NoteCanvasTs.ContentManager(),</p>","conns":["1008,1012","1012,1016","1012,1024"]},"1013":{"pos_x":1276.5294117647056,"pos_y":604.9019607843138,"width":429.9999999999997,"height":154.66666666666669,"content":"<p>//交互相关</p><p>canvas_mouse_drag_helper: null,</p><p>mouse_recorder: null,</p><p>drag_bar_helper:new NoteCanvasTs.DragBarHelper(),</p><p>moving_obj: null,</p><p>connecting_path: null,</p><p>line_connect_helper:new NoteCanvasFunc.LineConnectHelper(),</p>","conns":["1013,1008"]},"1014":{"pos_x":1281.6666666666667,"pos_y":442.9999999999993,"width":237.33333333333337,"height":134,"content":"<p>//文本块编辑</p><p>editing_editor_bar: null,</p><p>editing_editor_bar_id: \"-1\",</p><p>editor_bar_manager: null,</p><p>editor_tool_helper: new EditorToolFunc.EditorToolHelper(),</p>","conns":["1008,1014"]},"1015":{"pos_x":1494.8039215686272,"pos_y":84.41176470588215,"width":324.11764705882354,"height":317.0588235294124,"content":"<p>editor_bars:{</p><p>id(string):bar（<strong>EditorBar</strong>）</p><p>}</p><p>export class EditorBar{ //in EditorBarFunc.js</p><p class=\"ql-indent-1\">pos_x= 0</p><p class=\"ql-indent-1\">pos_y= 0</p><p class=\"ql-indent-1\">width=150</p><p class=\"ql-indent-1\">height=150</p><p class=\"ql-indent-1\">content=\"\"</p><p class=\"ql-indent-1\">conns= []</p><p class=\"ql-indent-1\">constructor(x,y) {</p><p class=\"ql-indent-1\">this.pos_x=x;</p><p class=\"ql-indent-1\">this.pos_y=y;</p><p class=\"ql-indent-1\">}</p><p>}</p><p>sSs</p>","conns":["1011,1015"]},"1016":{"pos_x":1119.5833333333337,"pos_y":844.5833333333335,"width":339.56060606060674,"height":123.49999999999991,"content":"<p>search_in_canvas=new search.SearchInCanvas()</p><p><br></p><p>功能</p><p class=\"ql-indent-1\">调用开始搜索后，执行搜索，执行时间超过阈值后，timeout后再进行搜索</p>","conns":["1012,1016"]},"1018":{"pos_x":404.12115108605616,"pos_y":-526.3620540734497,"width":140,"height":44,"content":"<p>storage_manager</p>","conns":["1018,1021","1033,1018","1031,1018"]},"1019":{"pos_x":465.91233212723733,"pos_y":-394.19907816047385,"width":271.4705882352941,"height":100.70588235294126,"content":"<p>rewiew_part_man</p><p>复习组件上下文，</p><p>1.在笔记切换时持有新笔记的复习数据</p><p>2.持有复习组件的一些界面状态</p>","conns":["1033,1019","1031,1019"]},"1021":{"pos_x":601.4529936819365,"pos_y":-619.0969025582979,"width":201.99999999999997,"height":67.90909090909092,"content":"<p>load_note_all</p><p>从文件或缓存读取笔记数据</p>","conns":["1018,1021","1021,1011","1021,1023"]},"1023":{"pos_x":724.0606715536525,"pos_y":-975.4504334539416,"width":274.60664335664404,"height":192.5297202797202,"content":"<h3>NoteContentData</h3><h3>关于note的所有需要存储到的数据</h3><p><br></p><p>//old 3个</p><p class=\"ql-indent-1\">next_editor_bar_id=1000</p><p class=\"ql-indent-1\">editor_bars={}</p><p class=\"ql-indent-1\">paths={}</p><p class=\"ql-indent-1\">part</p>","conns":["1007,1023","1005,1023","1021,1023","2060,1023","1023,1036","1034,1023","2061,1023"]},"1024":{"pos_x":1119.8181707208805,"pos_y":1024.0001054243608,"width":230.90909090909082,"height":80.90909090909093,"content":"<p>first_load_set</p><p>canvas传入加载完的存储数据</p>","conns":["1012,1024"]},"1025":{"pos_x":550.6666666666667,"pos_y":-69.33333333333354,"width":98,"height":44,"content":"<p>RightPart</p>","conns":["1025,1004","1025,1026","1025,1027"]},"1026":{"pos_x":754.6666666666666,"pos_y":-140.33333333333343,"width":116,"height":48,"content":"<p>ReviewPart</p>","conns":["1025,1026"]},"1027":{"pos_x":826.6666666666669,"pos_y":32.66666666666657,"width":220,"height":190,"content":"<p>NoteOutline</p><p>根据存储的大纲中存在的rootnode和nodes</p><p>递归绘制出大纲图</p><p><br></p><p>笔记内容经过变更就需要判断是否为大纲笔记，若是，则需更新大纲。</p>","conns":["1025,1027"]},"1028":{"pos_x":892.4999999999999,"pos_y":-435.00000000000006,"width":151.76470588235293,"height":43.5294117647059,"content":"<p>RightMenu</p>","conns":["1004,1028","1028,1029","1028,1030"]},"1029":{"pos_x":1100.3846153846152,"pos_y":-476.15384615384625,"width":173.84615384615392,"height":62.30769230769229,"content":"<p>通过bus通信，获取到右键事件并显示</p>","conns":["1028,1029"]},"1030":{"pos_x":1094.230769230769,"pos_y":-365.3846153846154,"width":519.2307692307705,"height":118.73626373626361,"content":"<p>触发方：</p><p><br></p><pre class=\"ql-syntax\" spellcheck=\"false\">RightMenuFuncTs.if_right_click_then_emit_bus(\n  e, ReviewPartCardFunc.construct_right_menu(review_part, this))\n</pre>","conns":["1028,1030"]},"1031":{"pos_x":197.9709595959597,"pos_y":-487.24368686868684,"width":96.25,"height":47.5,"content":"<p>context</p>","conns":["1031,1001","1031,1019","1031,1018","2057,1031","2058,1031","2059,1031"]},"1034":{"pos_x":903.1755009696184,"pos_y":-1340.886123680241,"width":196.428571428571,"height":82.14285714285758,"content":"<pre class=\"ql-syntax\" spellcheck=\"false\">editor_bars:any={}\n</pre><p>noteid-&gt;EditorBar</p>","conns":["1034,1032","1034,1037","1034,1023"]},"1036":{"pos_x":1046.270604395604,"pos_y":-966.2129120879122,"width":299.46428571428584,"height":360.53571428571433,"content":"<pre class=\"ql-syntax\" spellcheck=\"false\">part=new NoteCanvasTs.PartOfNoteContentData()\n</pre><p><br></p><p>//new 1</p><p class=\"ql-indent-1\">PartOfNoteContentData</p><p class=\"ql-indent-2\">//复习的卡片组信息</p><p class=\"ql-indent-2\">review_card_set_man</p><p class=\"ql-indent-2\">//同步到anki的变更的序列化数组</p><p class=\"ql-indent-2\">sync_anki_serialized</p><p class=\"ql-indent-2\"><br></p><h3 class=\"ql-indent-2\">todo</h3><p class=\"ql-indent-2\">大纲结构</p><p class=\"ql-indent-2\">{</p><p class=\"ql-indent-3\">root_ebid</p><p class=\"ql-indent-3\">ebids:[]</p><p class=\"ql-indent-2\">}</p>","conns":["1032,1036","1023,1036"]},"1037":{"pos_x":1125.822344322344,"pos_y":-1499.9871794871794,"width":133.18970503181052,"height":194.10352805089659,"content":"<p>EditorBar</p><pre class=\"ql-syntax\" spellcheck=\"false\">pos_x= 0\npos_y= 0\nwidth=150\nheight=150\ncontent=\"\"\nconns= []\n</pre>","conns":["1034,1037","1037,1038"]},"1038":{"pos_x":1279.1228070175434,"pos_y":-1516.5521255060733,"width":144.375,"height":100.625,"content":"<p>conns </p><p class=\"ql-indent-1\">数组</p><p class=\"ql-indent-1\">值为pathkey</p><p class=\"ql-indent-1\">ebid1+“,”+ebid2</p>","conns":["1037,1038"]},"2057":{"pos_x":307.3041958041957,"pos_y":-667.4539627039627,"width":126.15384615384613,"height":54.615384615384606,"content":"<p>logctx</p>","conns":["2057,1031"]},"2058":{"pos_x":285.07692307692304,"pos_y":-916.0000000000001,"width":169.99999999999997,"height":48.461538461538524,"content":"<p>notehandle 引用计数</p>","conns":["2058,1031","2058,2060"]},"2059":{"pos_x":293.6153846153846,"pos_y":-1073.5384615384617,"width":179.23076923076928,"height":59.23076923076931,"content":"","conns":["2059,1031"]},"2060":{"pos_x":502.45454545454544,"pos_y":-952.7272727272729,"width":165,"height":99,"content":"<p>notehandle</p><p class=\"ql-indent-1\">noteid</p><p class=\"ql-indent-1\">note content data</p>","conns":["2058,2060","2060,1023"]},"2061":{"pos_x":919.9520241110794,"pos_y":-1183.8475935828883,"width":201.33333333333331,"height":83.24999999999999,"content":"<p>paths</p><p>pathkey-&gt;PathStruct</p>","conns":["2061,1023","2061,2063"]},"2063":{"pos_x":1137.6666666666663,"pos_y":-1262.3333333333335,"width":165.6190476190476,"height":71.04761904761943,"content":"<p>PathStruct</p><p><br></p>","conns":["2061,2063"]}},"paths":{"1000,1001":{"ox":-33.15688717004031,"oy":-260.86136086136094,"b_bar":"1000","e_bar":"1001","w":155.24002625317937,"h":252.23039976110064,"bx":0,"by":252.23039976110064,"ex":155.24002625317937,"ey":0},"1002,1000":{"ox":-33.15688717004031,"oy":-8.630961100260285,"b_bar":"1002","e_bar":"1000","w":368.2850922982455,"h":188.5283969976959,"bx":368.2850922982455,"by":188.5283969976959,"ex":0,"ey":0},"1000,1004":{"ox":-33.15688717004031,"oy":-226.51282051282055,"b_bar":"1000","e_bar":"1004","w":385.66970768286086,"h":217.88185941256026,"bx":0,"by":217.88185941256026,"ex":385.66970768286086,"ey":0},"1004,1005":{"ox":352.51282051282055,"oy":-226.51282051282055,"b_bar":"1004","e_bar":"1005","w":106.94550221020819,"h":540.1018197488783,"bx":0,"by":0,"ex":106.94550221020819,"ey":540.1018197488783},"1004,1007":{"ox":352.51282051282055,"oy":-226.51282051282055,"b_bar":"1004","e_bar":"1007","w":377.10622710622715,"h":637.7023809523808,"bx":0,"by":0,"ex":377.10622710622715,"ey":637.7023809523808},"1007,1008":{"ox":729.6190476190477,"oy":411.1895604395603,"b_bar":"1007","e_bar":"1008","w":215.30769230769238,"h":69.00824175824164,"bx":0,"by":0,"ex":215.30769230769238,"ey":69.00824175824164},"1008,1009":{"ox":944.9267399267401,"oy":310.90196078431313,"b_bar":"1008","e_bar":"1009","w":126.32816203404445,"h":169.2958414134888,"bx":0,"by":169.2958414134888,"ex":126.32816203404445,"ey":0},"1008,1010":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1008","e_bar":"1010","w":143.28894634776952,"h":62.07670760611984,"bx":0,"by":0,"ex":143.28894634776952,"ey":62.07670760611984},"1008,1011":{"ox":944.9267399267401,"oy":293.92156862745037,"b_bar":"1008","e_bar":"1011","w":333.48502477914144,"h":186.27623357035156,"bx":0,"by":186.27623357035156,"ex":333.48502477914144,"ey":0},"1008,1012":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1008","e_bar":"1012","w":49.05365223012268,"h":222.50808015513928,"bx":0,"by":0,"ex":49.05365223012268,"ey":222.50808015513928},"1013,1008":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1013","e_bar":"1008","w":331.60267183796554,"h":124.70415858651188,"bx":331.60267183796554,"by":124.70415858651188,"ex":0,"ey":0},"1008,1014":{"ox":944.9267399267401,"oy":442.9999999999993,"b_bar":"1008","e_bar":"1014","w":336.73992673992666,"h":37.197802197802616,"bx":0,"by":37.197802197802616,"ex":336.73992673992666,"ey":0},"1011,1015":{"ox":1278.4117647058815,"oy":84.41176470588215,"b_bar":"1011","e_bar":"1015","w":216.39215686274565,"h":209.50980392156822,"bx":0,"by":209.50980392156822,"ex":216.39215686274565,"ey":0},"1012,1016":{"ox":993.9803921568628,"oy":702.7058823529412,"b_bar":"1012","e_bar":"1016","w":125.60294117647095,"h":141.87745098039227,"bx":0,"by":0,"ex":125.60294117647095,"ey":141.87745098039227},"1018,1021":{"ox":404.12115108605616,"oy":-619.0969025582979,"b_bar":"1018","e_bar":"1021","w":197.33184259588035,"h":92.73484848484816,"bx":0,"by":92.73484848484816,"ex":197.33184259588035,"ey":0},"1021,1011":{"ox":601.4529936819365,"oy":-619.0969025582979,"b_bar":"1021","e_bar":"1011","w":676.958771023945,"h":913.0184711857495,"bx":0,"by":0,"ex":676.958771023945,"ey":913.0184711857495},"1007,1023":{"ox":724.0606715536525,"oy":-975.4504334539416,"b_bar":"1007","e_bar":"1023","w":5.558376065395237,"h":1386.6399938935024,"bx":5.558376065395237,"by":1386.6399938935024,"ex":0,"ey":0},"1005,1023":{"ox":459.45832272302874,"oy":-975.4504334539416,"b_bar":"1005","e_bar":"1023","w":264.6023488306237,"h":1289.0394326899996,"bx":0,"by":1289.0394326899996,"ex":264.6023488306237,"ey":0},"1021,1023":{"ox":601.4529936819365,"oy":-975.4504334539416,"b_bar":"1021","e_bar":"1023","w":122.60767787171596,"h":356.35353089564376,"bx":0,"by":356.35353089564376,"ex":122.60767787171596,"ey":0},"1012,1024":{"ox":993.9803921568628,"oy":702.7058823529412,"b_bar":"1012","e_bar":"1024","w":125.83777856401775,"h":321.29422307141954,"bx":0,"by":0,"ex":125.83777856401775,"ey":321.29422307141954},"1025,1004":{"ox":352.51282051282055,"oy":-226.51282051282055,"b_bar":"1025","e_bar":"1004","w":198.1538461538462,"h":157.179487179487,"bx":198.1538461538462,"by":157.179487179487,"ex":0,"ey":0},"1025,1026":{"ox":550.6666666666667,"oy":-140.33333333333343,"b_bar":"1025","e_bar":"1026","w":203.9999999999999,"h":70.99999999999989,"bx":0,"by":70.99999999999989,"ex":203.9999999999999,"ey":0},"1025,1027":{"ox":550.6666666666667,"oy":-69.33333333333354,"b_bar":"1025","e_bar":"1027","w":276.0000000000001,"h":102.00000000000011,"bx":0,"by":0,"ex":276.0000000000001,"ey":102.00000000000011},"1004,1028":{"ox":352.51282051282055,"oy":-435.00000000000006,"b_bar":"1004","e_bar":"1028","w":539.9871794871793,"h":208.4871794871795,"bx":0,"by":208.4871794871795,"ex":539.9871794871793,"ey":0},"1028,1029":{"ox":892.4999999999999,"oy":-476.15384615384625,"b_bar":"1028","e_bar":"1029","w":207.88461538461536,"h":41.15384615384619,"bx":0,"by":41.15384615384619,"ex":207.88461538461536,"ey":0},"1028,1030":{"ox":892.4999999999999,"oy":-435.00000000000006,"b_bar":"1028","e_bar":"1030","w":201.73076923076917,"h":69.61538461538464,"bx":0,"by":0,"ex":201.73076923076917,"ey":69.61538461538464},"1034,1037":{"ox":903.1755009696184,"oy":-1499.9871794871794,"b_bar":"1034","e_bar":"1037","w":222.64684335272557,"h":159.10105580693835,"bx":0,"by":159.10105580693835,"ex":222.64684335272557,"ey":0},"1037,1038":{"ox":1125.822344322344,"oy":-1516.5521255060733,"b_bar":"1037","e_bar":"1038","w":153.30046269519949,"h":16.564946018893806,"bx":0,"by":16.564946018893806,"ex":153.30046269519949,"ey":0},"1031,1001":{"ox":122.08313908313914,"oy":-487.24368686868684,"b_bar":"1031","e_bar":"1001","w":75.88782051282055,"h":226.3823260073259,"bx":75.88782051282055,"by":0,"ex":0,"ey":226.3823260073259},"1031,1019":{"ox":197.9709595959597,"oy":-487.24368686868684,"b_bar":"1031","e_bar":"1019","w":267.9413725312777,"h":93.04460870821299,"bx":0,"by":0,"ex":267.9413725312777,"ey":93.04460870821299},"1031,1018":{"ox":197.9709595959597,"oy":-526.3620540734497,"b_bar":"1031","e_bar":"1018","w":206.15019149009646,"h":39.118367204762876,"bx":0,"by":39.118367204762876,"ex":206.15019149009646,"ey":0},"2057,1031":{"ox":197.97095959595964,"oy":-667.4539627039627,"b_bar":"2057","e_bar":"1031","w":109.33323620823603,"h":180.21027583527587,"bx":109.33323620823603,"by":0,"ex":0,"ey":180.21027583527587},"2058,1031":{"ox":197.9709595959597,"oy":-916.0000000000001,"b_bar":"2058","e_bar":"1031","w":87.10596348096334,"h":428.7563131313133,"bx":87.10596348096334,"by":0,"ex":0,"ey":428.7563131313133},"2059,1031":{"ox":197.9709595959597,"oy":-1073.5384615384617,"b_bar":"2059","e_bar":"1031","w":95.64442501942489,"h":586.2947746697748,"bx":95.64442501942489,"by":0,"ex":0,"ey":586.2947746697748},"2058,2060":{"ox":285.07692307692304,"oy":-952.7272727272729,"b_bar":"2058","e_bar":"2060","w":217.3776223776224,"h":36.72727272727275,"bx":0,"by":36.72727272727275,"ex":217.3776223776224,"ey":0},"2060,1023":{"ox":502.45454545454544,"oy":-975.4504334539416,"b_bar":"2060","e_bar":"1023","w":221.60612609910703,"h":22.723160726668766,"bx":0,"by":22.723160726668766,"ex":221.60612609910703,"ey":0},"1023,1036":{"ox":724.0606715536525,"oy":-975.4504334539416,"b_bar":"1023","e_bar":"1036","w":322.2099328419516,"h":9.237521366029455,"bx":0,"by":0,"ex":322.2099328419516,"ey":9.237521366029455},"1034,1023":{"ox":724.0606715536525,"oy":-1340.886123680241,"b_bar":"1034","e_bar":"1023","w":179.11482941596591,"h":365.43569022629947,"bx":179.11482941596591,"by":0,"ex":0,"ey":365.43569022629947},"2061,1023":{"ox":724.0606715536525,"oy":-1183.8475935828883,"b_bar":"2061","e_bar":"1023","w":195.8913525574269,"h":208.39716012894667,"bx":195.8913525574269,"by":0,"ex":0,"ey":208.39716012894667},"2061,2063":{"ox":919.9520241110794,"oy":-1262.3333333333335,"b_bar":"2061","e_bar":"2063","w":217.71464255558692,"h":78.48573975044519,"bx":0,"by":78.48573975044519,"ex":217.71464255558692,"ey":0}},"part":{"review_card_set_man":{"cardsets":{"啊":{"value":"啊","next_card_id":0,"cards":{}},"你好":{"value":"你好","next_card_id":1,"cards":{"0":{"id":"0","back":[{"linking_info":null,"text":"new","bartype":0}],"front":[{"linking_info":null,"text":"new","bartype":0}]}}}}},"sync_anki_serialized":"[]","note_outline":{"trees":[{"all_ebs":{"1000":1,"1001":1,"1002":1,"1004":1,"1005":1,"1007":1,"1018":1,"1019":1,"1025":1,"1033":1,"1034":1},"root_node":{"child_nodes":[{"child_nodes":[{"child_nodes":[],"cur_ebid":"1007"},{"child_nodes":[],"cur_ebid":"1025"},{"child_nodes":[],"cur_ebid":"1005"}],"cur_ebid":"1004"},{"child_nodes":[{"child_nodes":[{"child_nodes":[],"cur_ebid":"1019"},{"child_nodes":[],"cur_ebid":"1018"},{"child_nodes":[],"cur_ebid":"1034"}],"cur_ebid":"1033"}],"cur_ebid":"1001"},{"child_nodes":[],"cur_ebid":"1002"}],"cur_ebid":"1000"}}]}}},"note_id":"2022:5:2:9:40:7:314"}