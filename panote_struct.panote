{"note_content_data":{"next_editor_bar_id":2056,"editor_bars":{"1000":{"pos_x":101.04765828450513,"pos_y":-46.380961100260265,"width":98.46153846153847,"height":66.92307692307695,"content":"<p>App是是是</p>","conns":["1000,1001","1002,1000","1000,1004"]},"1001":{"pos_x":178.15384615384616,"pos_y":-252.3260073260073,"width":77.84615384615384,"height":42.84615384615392,"content":"<p>data</p>","conns":["1000,1001","1033,1001","1031,1001"]},"1002":{"pos_x":335.12820512820514,"pos_y":179.8974358974356,"width":73.84615384615384,"height":43.84615384615392,"content":"<p>func</p>","conns":["1002,1000"]},"1004":{"pos_x":354.51282051282055,"pos_y":-48.5128205128205,"width":83.84615384615385,"height":46.15384615384617,"content":"<p>comp</p>","conns":["1000,1004","1004,1005","1004,1007","1025,1004","1004,1028"]},"1005":{"pos_x":459.45832272302874,"pos_y":313.5889992360577,"width":164.57142857142864,"height":98.28571428571433,"content":"<p>NoteList</p><p>1.展示笔记列表</p><p>2.获取笔记的存储路径</p>","conns":["1004,1005","1005,1023"]},"1007":{"pos_x":729.6190476190477,"pos_y":411.1895604395603,"width":120.98901098901099,"height":44.72527472527469,"content":"<p>NoteCanvas</p>","conns":["1004,1007","1007,1008","1007,1023"]},"1008":{"pos_x":944.9267399267401,"pos_y":480.19780219780193,"width":58.84615384615384,"height":44.84615384615392,"content":"<p>data</p>","conns":["1007,1008","1008,1009","1008,1010","1008,1011","1008,1012","1013,1008","1008,1014"]},"1009":{"pos_x":1071.2549019607845,"pos_y":310.90196078431313,"width":158.23529411764738,"height":137.6470588235291,"content":"<p>//界面效果相关</p><p>scroll_enabled: false,</p><p>scale: 1,</p><p>scale_step: 0.1,</p><p>edge_size_w: 100,</p><p>edge_size_h: 100,</p>","conns":["1008,1009"]},"1010":{"pos_x":1088.2156862745096,"pos_y":542.2745098039218,"width":170.5882352941179,"height":116.47058823529366,"content":"<p>//note chunk边界计算值</p><p>padding_add_up: 0,</p><p>padding_add_down: 0,</p><p>padding_add_left: 0,</p><p>padding_add_right: 0,</p>","conns":["1008,1010"]},"1011":{"pos_x":1278.4117647058815,"pos_y":293.92156862745037,"width":187.6470588235296,"height":104.86274509803857,"content":"<p>//存储相关</p><p>//data to save-&gt;</p><p>editor_bars: {},</p><p>next_editor_bar_id:1000,</p><p>paths: {},</p>","conns":["1008,1011","1011,1015","1021,1011"]},"1012":{"pos_x":993.9803921568628,"pos_y":702.7058823529412,"width":244.11764705882334,"height":81.7647058823529,"content":"<p>//manage data</p><p>content_manager:new NoteCanvasTs.ContentManager(),</p>","conns":["1008,1012","1012,1016","1012,1024"]},"1013":{"pos_x":1276.5294117647056,"pos_y":604.9019607843138,"width":429.9999999999997,"height":154.66666666666669,"content":"<p>//交互相关</p><p>canvas_mouse_drag_helper: null,</p><p>mouse_recorder: null,</p><p>drag_bar_helper:new NoteCanvasTs.DragBarHelper(),</p><p>moving_obj: null,</p><p>connecting_path: null,</p><p>line_connect_helper:new NoteCanvasFunc.LineConnectHelper(),</p>","conns":["1013,1008"]},"1014":{"pos_x":1281.6666666666667,"pos_y":442.9999999999993,"width":237.33333333333337,"height":134,"content":"<p>//文本块编辑</p><p>editing_editor_bar: null,</p><p>editing_editor_bar_id: \"-1\",</p><p>editor_bar_manager: null,</p><p>editor_tool_helper: new EditorToolFunc.EditorToolHelper(),</p>","conns":["1008,1014"]},"1015":{"pos_x":1494.8039215686272,"pos_y":84.41176470588215,"width":324.11764705882354,"height":317.0588235294124,"content":"<p>editor_bars:{</p><p>id(string):bar（<strong>EditorBar</strong>）</p><p>}</p><p>export class EditorBar{ //in EditorBarFunc.js</p><p class=\"ql-indent-1\">pos_x= 0</p><p class=\"ql-indent-1\">pos_y= 0</p><p class=\"ql-indent-1\">width=150</p><p class=\"ql-indent-1\">height=150</p><p class=\"ql-indent-1\">content=\"\"</p><p class=\"ql-indent-1\">conns= []</p><p class=\"ql-indent-1\">constructor(x,y) {</p><p class=\"ql-indent-1\">this.pos_x=x;</p><p class=\"ql-indent-1\">this.pos_y=y;</p><p class=\"ql-indent-1\">}</p><p>}</p><p>sSs</p>","conns":["1011,1015"]},"1016":{"pos_x":1119.5833333333337,"pos_y":844.5833333333335,"width":339.56060606060674,"height":123.49999999999991,"content":"<p>search_in_canvas=new search.SearchInCanvas()</p><p><br></p><p>功能</p><p class=\"ql-indent-1\">调用开始搜索后，执行搜索，执行时间超过阈值后，timeout后再进行搜索</p>","conns":["1012,1016"]},"1017":{"pos_x":467.6666666666668,"pos_y":695.3333333333342,"width":150,"height":150,"content":"","conns":[]},"1018":{"pos_x":503.6666056315106,"pos_y":-659.7332661946618,"width":140,"height":44,"content":"<p>storage_manager</p>","conns":["1018,1021","1033,1018","1031,1018"]},"1019":{"pos_x":446.777716742622,"pos_y":-393.62215508355075,"width":271.4705882352941,"height":100.70588235294126,"content":"<p>rewiew_part_man</p><p>复习组件上下文，</p><p>1.在笔记切换时持有新笔记的复习数据</p><p>2.持有复习组件的一些界面状态</p>","conns":["1033,1019","1031,1019"]},"1021":{"pos_x":735.0666300455729,"pos_y":-684.7332661946616,"width":192,"height":67,"content":"<p>load_note_all</p><p>从文件或缓存读取笔记数据</p>","conns":["1018,1021","1021,1011","1021,1023"]},"1023":{"pos_x":705.4666544596355,"pos_y":895.7333272298179,"width":306.81818181818255,"height":372.81818181818164,"content":"<h3>NoteContentData</h3><h3>关于note的所有需要存储到的数据</h3><p><br></p><p>//old 3个</p><p class=\"ql-indent-1\">next_editor_bar_id=1000</p><p class=\"ql-indent-1\">editor_bars={}</p><p class=\"ql-indent-1\">paths={}</p><p><br></p><p>//new 1</p><p class=\"ql-indent-1\">PartOfNoteContentData</p><p class=\"ql-indent-2\">//复习的卡片组信息</p><p class=\"ql-indent-2\">review_card_set_man</p><p class=\"ql-indent-2\">//同步到anki的变更的序列化数组</p><p class=\"ql-indent-2\">sync_anki_serialized</p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><h3 class=\"ql-indent-2\">todo</h3><p class=\"ql-indent-2\">大纲结构</p><p class=\"ql-indent-2\">{</p><p class=\"ql-indent-3\">root_ebid</p><p class=\"ql-indent-3\">ebids:[]</p><p class=\"ql-indent-2\">}</p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-2\"><br></p><p class=\"ql-indent-1\"><br></p>","conns":["1007,1023","1005,1023","1021,1023"]},"1024":{"pos_x":1119.8181707208805,"pos_y":1024.0001054243608,"width":230.90909090909082,"height":80.90909090909093,"content":"<p>first_load_set</p><p>canvas传入加载完的存储数据</p>","conns":["1012,1024"]},"1025":{"pos_x":550.6666666666667,"pos_y":-69.33333333333354,"width":98,"height":44,"content":"<p>RightPart</p>","conns":["1025,1004","1025,1026","1025,1027"]},"1026":{"pos_x":754.6666666666666,"pos_y":-140.33333333333343,"width":116,"height":48,"content":"<p>ReviewPart</p>","conns":["1025,1026"]},"1027":{"pos_x":826.6666666666669,"pos_y":32.66666666666657,"width":220,"height":190,"content":"<p>NoteOutline</p><p>根据存储的大纲中存在的rootnode和nodes</p><p>递归绘制出大纲图</p><p><br></p><p>笔记内容经过变更就需要判断是否为大纲笔记，若是，则需更新大纲。</p>","conns":["1025,1027"]},"1028":{"pos_x":892.4999999999999,"pos_y":-435.00000000000006,"width":151.76470588235293,"height":43.5294117647059,"content":"<p>RightMenu</p>","conns":["1004,1028","1028,1029","1028,1030"]},"1029":{"pos_x":1100.3846153846152,"pos_y":-476.15384615384625,"width":173.84615384615392,"height":62.30769230769229,"content":"<p>通过bus通信，获取到右键事件并显示</p>","conns":["1028,1029"]},"1030":{"pos_x":1094.230769230769,"pos_y":-365.3846153846154,"width":519.2307692307705,"height":102.30769230769221,"content":"<p>触发方：</p><p><br></p><pre class=\"ql-syntax\" spellcheck=\"false\">RightMenuFuncTs.if_right_click_then_emit_bus(\n  e, ReviewPartCardFunc.construct_right_menu(review_part, this))\n</pre>","conns":["1028,1030"]},"1031":{"pos_x":7.14772727272725,"pos_y":-541.7840909090909,"width":96.25,"height":47.5,"content":"<p>context</p>","conns":["1031,1001","1031,1019","1031,1018"]},"1034":{"pos_x":796.0714285714284,"pos_y":-1259.1666666666665,"width":196.428571428571,"height":82.14285714285758,"content":"<pre class=\"ql-syntax\" spellcheck=\"false\">editor_bars:any={}\n</pre><p>noteid-&gt;EditorBar</p>","conns":["1034,1032","1034,1037"]},"1035":{"pos_x":859.6428571428569,"pos_y":-1089.642857142857,"width":210.71428571428527,"height":81.6190476190481,"content":"<pre class=\"ql-syntax\" spellcheck=\"false\">paths:any={}\n</pre><p>pathkey-&gt;PathStruct</p>","conns":["1032,1035","1035,1031"]},"1036":{"pos_x":850.3571428571427,"pos_y":-975.3571428571429,"width":345.71428571428584,"height":84.28571428571436,"content":"<pre class=\"ql-syntax\" spellcheck=\"false\">part=new NoteCanvasTs.PartOfNoteContentData()\n</pre>","conns":["1032,1036"]},"1037":{"pos_x":1072.9761904761901,"pos_y":-1355.8333333333333,"width":140.1127819548875,"height":177.18045112781968,"content":"<p>EditorBar</p><pre class=\"ql-syntax\" spellcheck=\"false\">pos_x= 0\npos_y= 0\nwidth=150\nheight=150\ncontent=\"\"\nconns= []\n</pre>","conns":["1034,1037","1037,1038"]},"1038":{"pos_x":1274.1228070175434,"pos_y":-1448.7828947368423,"width":144.375,"height":100.625,"content":"<p>conns </p><p class=\"ql-indent-1\">数组</p><p class=\"ql-indent-1\">值为pathkey</p><p class=\"ql-indent-1\">ebid1+“,”+ebid2</p>","conns":["1037,1038"]}},"paths":{"1000,1001":{"ox":101.04765828450513,"oy":-252.3260073260073,"b_bar":"1000","e_bar":"1001","w":77.10618786934103,"h":205.94504622574703,"bx":0,"by":205.94504622574703,"ex":77.10618786934103,"ey":0},"1002,1000":{"ox":101.04765828450513,"oy":-46.380961100260265,"b_bar":"1002","e_bar":"1000","w":234.0805468437,"h":226.27839699769586,"bx":234.0805468437,"by":226.27839699769586,"ex":0,"ey":0},"1000,1004":{"ox":101.04765828450513,"oy":-48.5128205128205,"b_bar":"1000","e_bar":"1004","w":253.46516222831542,"h":2.1318594125602317,"bx":0,"by":2.1318594125602317,"ex":253.46516222831542,"ey":0},"1004,1005":{"ox":354.51282051282055,"oy":-48.5128205128205,"b_bar":"1004","e_bar":"1005","w":104.94550221020819,"h":362.1018197488782,"bx":0,"by":0,"ex":104.94550221020819,"ey":362.1018197488782},"1004,1007":{"ox":354.51282051282055,"oy":-48.5128205128205,"b_bar":"1004","e_bar":"1007","w":375.10622710622715,"h":459.7023809523808,"bx":0,"by":0,"ex":375.10622710622715,"ey":459.7023809523808},"1007,1008":{"ox":729.6190476190477,"oy":411.1895604395603,"b_bar":"1007","e_bar":"1008","w":215.30769230769238,"h":69.00824175824164,"bx":0,"by":0,"ex":215.30769230769238,"ey":69.00824175824164},"1008,1009":{"ox":944.9267399267401,"oy":310.90196078431313,"b_bar":"1008","e_bar":"1009","w":126.32816203404445,"h":169.2958414134888,"bx":0,"by":169.2958414134888,"ex":126.32816203404445,"ey":0},"1008,1010":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1008","e_bar":"1010","w":143.28894634776952,"h":62.07670760611984,"bx":0,"by":0,"ex":143.28894634776952,"ey":62.07670760611984},"1008,1011":{"ox":944.9267399267401,"oy":293.92156862745037,"b_bar":"1008","e_bar":"1011","w":333.48502477914144,"h":186.27623357035156,"bx":0,"by":186.27623357035156,"ex":333.48502477914144,"ey":0},"1008,1012":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1008","e_bar":"1012","w":49.05365223012268,"h":222.50808015513928,"bx":0,"by":0,"ex":49.05365223012268,"ey":222.50808015513928},"1013,1008":{"ox":944.9267399267401,"oy":480.19780219780193,"b_bar":"1013","e_bar":"1008","w":331.60267183796554,"h":124.70415858651188,"bx":331.60267183796554,"by":124.70415858651188,"ex":0,"ey":0},"1008,1014":{"ox":944.9267399267401,"oy":442.9999999999993,"b_bar":"1008","e_bar":"1014","w":336.73992673992666,"h":37.197802197802616,"bx":0,"by":37.197802197802616,"ex":336.73992673992666,"ey":0},"1011,1015":{"ox":1278.4117647058815,"oy":84.41176470588215,"b_bar":"1011","e_bar":"1015","w":216.39215686274565,"h":209.50980392156822,"bx":0,"by":209.50980392156822,"ex":216.39215686274565,"ey":0},"1012,1016":{"ox":993.9803921568628,"oy":702.7058823529412,"b_bar":"1012","e_bar":"1016","w":125.60294117647095,"h":141.87745098039227,"bx":0,"by":0,"ex":125.60294117647095,"ey":141.87745098039227},"1018,1021":{"ox":503.6666056315106,"oy":-684.7332661946616,"b_bar":"1018","e_bar":"1021","w":231.40002441406227,"h":24.999999999999773,"bx":0,"by":24.999999999999773,"ex":231.40002441406227,"ey":0},"1021,1011":{"ox":735.0666300455729,"oy":-684.7332661946616,"b_bar":"1021","e_bar":"1011","w":543.3451346603086,"h":978.654834822112,"bx":0,"by":0,"ex":543.3451346603086,"ey":978.654834822112},"1007,1023":{"ox":705.4666544596355,"oy":411.1895604395603,"b_bar":"1007","e_bar":"1023","w":24.152393159412213,"h":484.54376679025756,"bx":24.152393159412213,"by":0,"ex":0,"ey":484.54376679025756},"1005,1023":{"ox":459.45832272302874,"oy":313.5889992360577,"b_bar":"1005","e_bar":"1023","w":246.00833173660675,"h":582.1443279937602,"bx":0,"by":0,"ex":246.00833173660675,"ey":582.1443279937602},"1021,1023":{"ox":705.4666544596355,"oy":-684.7332661946616,"b_bar":"1021","e_bar":"1023","w":29.599975585937386,"h":1580.4665934244795,"bx":29.599975585937386,"by":0,"ex":0,"ey":1580.4665934244795},"1012,1024":{"ox":993.9803921568628,"oy":702.7058823529412,"b_bar":"1012","e_bar":"1024","w":125.83777856401775,"h":321.29422307141954,"bx":0,"by":0,"ex":125.83777856401775,"ey":321.29422307141954},"1025,1004":{"ox":354.51282051282055,"oy":-69.33333333333354,"b_bar":"1025","e_bar":"1004","w":196.1538461538462,"h":20.820512820513045,"bx":196.1538461538462,"by":0,"ex":0,"ey":20.820512820513045},"1025,1026":{"ox":550.6666666666667,"oy":-140.33333333333343,"b_bar":"1025","e_bar":"1026","w":203.9999999999999,"h":70.99999999999989,"bx":0,"by":70.99999999999989,"ex":203.9999999999999,"ey":0},"1025,1027":{"ox":550.6666666666667,"oy":-69.33333333333354,"b_bar":"1025","e_bar":"1027","w":276.0000000000001,"h":102.00000000000011,"bx":0,"by":0,"ex":276.0000000000001,"ey":102.00000000000011},"1004,1028":{"ox":354.51282051282055,"oy":-435.00000000000006,"b_bar":"1004","e_bar":"1028","w":537.9871794871793,"h":386.48717948717956,"bx":0,"by":386.48717948717956,"ex":537.9871794871793,"ey":0},"1028,1029":{"ox":892.4999999999999,"oy":-476.15384615384625,"b_bar":"1028","e_bar":"1029","w":207.88461538461536,"h":41.15384615384619,"bx":0,"by":41.15384615384619,"ex":207.88461538461536,"ey":0},"1028,1030":{"ox":892.4999999999999,"oy":-435.00000000000006,"b_bar":"1028","e_bar":"1030","w":201.73076923076917,"h":69.61538461538464,"bx":0,"by":0,"ex":201.73076923076917,"ey":69.61538461538464},"1031,1032":{"ox":7.14772727272725,"oy":-895.2083333333334,"b_bar":"1031","e_bar":"1032","w":374.3939393939395,"h":353.4242424242425,"bx":0,"by":353.4242424242425,"ex":374.3939393939395,"ey":0},"1034,1032":{"ox":381.54166666666674,"oy":-1259.1666666666665,"b_bar":"1034","e_bar":"1032","w":414.5297619047617,"h":363.95833333333314,"bx":414.5297619047617,"by":0,"ex":0,"ey":363.95833333333314},"1032,1035":{"ox":381.54166666666674,"oy":-1089.642857142857,"b_bar":"1032","e_bar":"1035","w":478.10119047619014,"h":194.43452380952374,"bx":0,"by":194.43452380952374,"ex":478.10119047619014,"ey":0},"1032,1036":{"ox":381.54166666666674,"oy":-975.3571428571429,"b_bar":"1032","e_bar":"1036","w":468.8154761904759,"h":80.14880952380952,"bx":0,"by":80.14880952380952,"ex":468.8154761904759,"ey":0},"1034,1037":{"ox":796.0714285714284,"oy":-1355.8333333333333,"b_bar":"1034","e_bar":"1037","w":276.9047619047617,"h":96.66666666666674,"bx":0,"by":96.66666666666674,"ex":276.9047619047617,"ey":0},"1037,1038":{"ox":1072.9761904761901,"oy":-1448.7828947368423,"b_bar":"1037","e_bar":"1038","w":201.1466165413533,"h":92.94956140350905,"bx":0,"by":92.94956140350905,"ex":201.1466165413533,"ey":0},"1035,1031":{"ox":7.14772727272725,"oy":-1089.642857142857,"b_bar":"1035","e_bar":"1031","w":852.4951298701296,"h":547.8587662337662,"bx":852.4951298701296,"by":0,"ex":0,"ey":547.8587662337662},"1031,1001":{"ox":7.14772727272725,"oy":-541.7840909090909,"b_bar":"1031","e_bar":"1001","w":171.0061188811189,"h":289.4580835830836,"bx":0,"by":0,"ex":171.0061188811189,"ey":289.4580835830836},"1031,1019":{"ox":7.14772727272725,"oy":-541.7840909090909,"b_bar":"1031","e_bar":"1019","w":439.6299894698947,"h":148.16193582554013,"bx":0,"by":0,"ex":439.6299894698947,"ey":148.16193582554013},"1031,1018":{"ox":7.14772727272725,"oy":-659.7332661946618,"b_bar":"1031","e_bar":"1018","w":496.51887835878335,"h":117.94917528557096,"bx":0,"by":117.94917528557096,"ex":496.51887835878335,"ey":0}},"part":{"review_card_set_man":{"cardsets":{"啊":{"value":"啊","next_card_id":0,"cards":{}},"你好":{"value":"你好","next_card_id":1,"cards":{"0":{"id":"0","back":[{"linking_info":null,"text":"new","bartype":0}],"front":[{"linking_info":null,"text":"new","bartype":0}]}}}}},"sync_anki_serialized":"[]","note_outline":{"trees":[{"all_ebs":{"1000":1,"1001":1,"1002":1,"1004":1,"1005":1,"1007":1,"1018":1,"1019":1,"1025":1,"1033":1,"1034":1},"root_node":{"child_nodes":[{"child_nodes":[{"child_nodes":[],"cur_ebid":"1007"},{"child_nodes":[],"cur_ebid":"1025"},{"child_nodes":[],"cur_ebid":"1005"}],"cur_ebid":"1004"},{"child_nodes":[{"child_nodes":[{"child_nodes":[],"cur_ebid":"1019"},{"child_nodes":[],"cur_ebid":"1018"},{"child_nodes":[],"cur_ebid":"1034"}],"cur_ebid":"1033"}],"cur_ebid":"1001"},{"child_nodes":[],"cur_ebid":"1002"}],"cur_ebid":"1000"}}]}}},"note_id":"2022:5:2:9:40:7:314"}